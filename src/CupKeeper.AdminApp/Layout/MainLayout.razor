@inherits LayoutComponentBase
@inject IThemeManager ThemeManager
@inject DataContextService DataContext
<CascadingValue TValue="ITheme" Value="ThemeManager.Current" Name="Theme">
    <CascadingValue Value="DataContext" Name="DataContext">
            <div class="min-h-full h-full">
                <nav class="bg-indigo-800">
                    <div class="mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="flex h-16 items-center justify-between">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <h1 class="font-bold monospace text-white">Cup Keeper</h1>
                                </div>
                                <div class="hidden md:block">
                                    <MainNav />
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
                @Body
            </div>
        </CascadingValue>
    </CascadingValue>
@code {

    

    protected override async Task OnInitializedAsync()
    {
        DataContext.PropertyChanged += (sender, args) => StateHasChanged();
        
        await DataContext.InitializeAsync();
        await base.OnInitializedAsync();
    }

}